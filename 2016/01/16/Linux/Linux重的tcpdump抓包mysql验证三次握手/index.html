<!DOCTYPE HTML>
<html>

<head>
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="bookmark" type="image/x-icon" href="/bitbug_favicon_64s.ico" />
	<link rel="shortcut icon" href="/bitbug_favicon_64s.ico">
	
	    <title>
    Cultoy
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="maywzh" />
    
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('https://i.loli.net/2020/03/02/mYeD6WLp3kOy1qw.png') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

	    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="https://cdn.jsdelivr.net/gh/jquery/jquery@1.11.3/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ajlkn/jquery.scrollex@0.2.1/jquery.scrollex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/maywzh/jquery.scrolly@0.0.1/dist/jquery.scrolly.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ajlkn/skel@3.0.1/dist/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<meta name="generator" content="Hexo 5.1.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_okaidia.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->

<body class="is-loading">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">MAYWZH</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special">
	<ul class="menu links">
		<!-- Homepage  主页  -->
		<li>
			<a href="/" rel="nofollow">Home</a>
		</li>
		<!-- categories_name  分类   -->
		
		<li class="active">
			<a href="#s1">Category</a>
			<ul class="submenu">
				<li>
					<a class="category-link" href="/categories/DevOps/">DevOps</a></li><li><a class="category-link" href="/categories/uncategorized/">uncategorized</a></li><li><a class="category-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></li><li><a class="category-link" href="/categories/%E5%88%B7%E9%A2%98/">刷题</a></li><li><a class="category-link" href="/categories/%E5%9D%91/">坑</a></li><li><a class="category-link" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a></li><li><a class="category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li><a class="category-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li><li><a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li><a class="category-link" href="/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/">方法论</a></li><li><a class="category-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li><a class="category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li><a class="category-link" href="/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">系统设计</a></li><li><a class="category-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></li><li><a class="category-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></li><li><a class="category-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>
			</ul>
		</li>
		
		<!-- archives  归档   -->
		
		<li class="active">
			<a href="#s1">Archive</a>
			<ul class="submenu">
				<li>
					<a class="archive-link" href="/archives/2020/">2020</a></li><li><a class="archive-link" href="/archives/2019/">2019</a></li><li><a class="archive-link" href="/archives/2018/">2018</a></li><li><a class="archive-link" href="/archives/2017/">2017</a></li><li><a class="archive-link" href="/archives/2016/">2016</a></li><li><a class="archive-link" href="/archives/2015/">2015</a>
			</ul>
		</li>
		

		<!-- Pages 自定义   -->
		
		<li>
			<a href="/tags/" title="Tags">
				Tags
			</a>
		</li>
		
		<li>
			<a href="/about/" title="About">
				About
			</a>
		</li>
		


	</ul>
	<!-- icons 图标   -->
	<ul class="icons">
		
		<li>
			<a title="search" href="https://io.maywzh.com" target="_blank" rel="noopener">
				<i class="icon fa fa-search"></i>
			</a>
		</li>
		
		
		<li>
			<a title="twitter" href="https://twitter.com/maywzh" target="_blank" rel="noopener">
				<i class="icon fa fa-twitter"></i>
			</a>
		</li>
		
		<li>
			<a title="github" href="https://github.com/maywzh" target="_blank" rel="noopener">
				<i class="icon fa fa-github"></i>
			</a>
		</li>
		
	</ul>
</nav>

        <div id="main">
            <div class="post_page_title_img"
                style="height: 25rem;background-image: url(https://i.loli.net/2020/08/23/6NJkSv1aUTLPp4Q.png);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;">
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;">
                    <h2>tcpdump 抓包 mysql 验证三次握手</h2>
                </a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <p><code>TCP</code>的三次握手、4 次挥手是老生常谈的东西，那么具体的包数据传输过程你是否真正的试过呢？我们今天就通过具体的 <code>mysql</code> 建联实践来看看是怎么传递数据包的。</p>
<a id="more"></a>
<h2><span id="网络嗅探器和-tcpdump">网络嗅探器和 <code>tcpdump</code></span></h2><p> 在共享式的网络中，数据的传输是怎么完成的呢？又是怎么找到对应的机器来进行数据交互的呢？</p>
<p>一般来说，在网络中，信息报会广播到网络中所有主机的网络接口，主机的网络设备通过 IP 和 MAC 地址等信息判断该信息包是否应该接收，通过抛弃与自己无关的数据包，这样就达到互联网中我们与指定机器通信的目的。</p>
<p>但是在众多的黑客技术中，嗅探器 <code>（sniffer）</code> 是一种很常见的技术，它使主机的网络设备接收所有到达的信息包，从而达到网络监听的目的。在共享式的局域网中，嗅探器可以对该网络中的流量一览无余。除了黑客，网络管理员也应该学会使用嗅探器来随时掌握网络的使用情况，在网络性能急剧下降时，找到网络阻塞和问题的根源。</p>
<p>具体的嗅探器工具在 <code>Windows</code> 平台上有 <code>netxray</code> 和<code>sniffer pro</code>软件，在 <code>Linux</code> 平台上有 <code>tcpdump</code>。我们今天要介绍的就是<code>tcpdump sniffer</code> 嗅探器工具。</p>
<h2><span id="安装-tcpdump">安装 <code>tcpdump</code></span></h2><p><code>tcpdump</code> 是<code>Linux</code>平台一个以命令行方式运行的网络流量检测工具，它能截获网卡上收到的数据包，并通过一定的配置来完成对内容的解析和分析。</p>
<p>检测系统中是否已经安装了 <code>tcpdump</code> 的方法非常简单，就是直接执行：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ tcpdump
<span class="token comment"># 如果没有安装</span>
tcpdump: no suitable device found
<span class="token comment"># 如果已经安装，则当有网络请求时会出现许多的这种网络解析数据</span>
<span class="token number">21</span>:44:14.109590 IP client.host <span class="token operator">></span> server.host: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">1031520</span>:1031984, ack <span class="token number">1393</span>, win <span class="token number">95</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2242702304</span> ecr <span class="token number">3381086780</span><span class="token punctuation">]</span>, length <span class="token number">464</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>最新的 <code>tcpdump</code> 源码下载地址：<a target="_blank" rel="noopener" href="http://www.tcpdump.org/">http://www.tcpdump.org</a> （tcpdump 官网）</p>
<blockquote>
<p><code>tcpdump</code>的运行需要 <code>pcap</code> 的支持，请同时下载这两个内容并安装，一般最新版本的两者是互相兼容的。</p>
</blockquote>
<p>笔者本次下载的是最新的版本，直接在命令行里使用 wget 下载即可：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 下载 tcpdump 文件</span>
$ <span class="token function">wget</span> www.tcpdump.org/release/tcpdump-4.9.2.tar.gz

<span class="token comment"># 下载 pcap 文件</span>
$ <span class="token function">wget</span> www.tcpdump.org/release/libpcap-1.9.0.tar.gz

<span class="token comment"># 安装 libpcap，make install 的时候可能需要 root 权限</span>
$ <span class="token function">tar</span> -zxvf libpcap-1.9.0.tar.gz
$ <span class="token builtin class-name">cd</span> libpcap-1.9.0.tar.gz
$ ./configure
$ <span class="token function">make</span>
$ <span class="token function">make</span> <span class="token function">install</span>

<span class="token comment"># 安装 tcpdump 的过程</span>
$ <span class="token function">tar</span> -zxvf tcpdump-4.9.2
$ <span class="token builtin class-name">cd</span> tcpdump-4.9.2
$ ./configure
$ <span class="token function">make</span>
$ <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>安装完成后跟上面一样输入 <code>tcpdump</code> 判断是否成功安装了：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ tcpdump<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2><span id="tcpdump的命令行参数和过滤规则"><code>tcpdump</code>的命令行参数和过滤规则 </span></h2><p><code>tcpdump</code> 是个命令行方式的网络嗅探器，如果不使用任何参数，会持续捕获所有的网络请求内容，无法有效分析，可以针对自己的需求使用合适的参数。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 查看所有的参数内容</span>
$ tcpdump --help
tcpdump version <span class="token number">4.9</span>.2
libpcap version <span class="token number">1.9</span>.0-PRE-GIT <span class="token punctuation">(</span>with TPACKET_V2<span class="token punctuation">)</span>
OpenSSL <span class="token number">1.0</span>.0-fips <span class="token number">29</span> Mar <span class="token number">2010</span>
Usage: tcpdump <span class="token punctuation">[</span>-aAbdDefhHIJKlLnNOpqStuUvxX<span class="token comment">#] [-B size] [-c count]</span>
                <span class="token punctuation">[</span> -C file_size <span class="token punctuation">]</span> <span class="token punctuation">[</span> -E algo:secret <span class="token punctuation">]</span> <span class="token punctuation">[</span> -F <span class="token function">file</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> -G seconds <span class="token punctuation">]</span>
                <span class="token punctuation">[</span> -i interface <span class="token punctuation">]</span> <span class="token punctuation">[</span> -j tstamptype <span class="token punctuation">]</span> <span class="token punctuation">[</span> -M secret <span class="token punctuation">]</span> <span class="token punctuation">[</span> --number <span class="token punctuation">]</span>
                <span class="token punctuation">[</span> -Q <span class="token keyword">in</span><span class="token operator">|</span>out<span class="token operator">|</span>inout <span class="token punctuation">]</span>
                <span class="token punctuation">[</span> -r <span class="token function">file</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> -s snaplen <span class="token punctuation">]</span> <span class="token punctuation">[</span> --time-stamp-precision precision <span class="token punctuation">]</span>
                <span class="token punctuation">[</span> --immediate-mode <span class="token punctuation">]</span> <span class="token punctuation">[</span> -T <span class="token builtin class-name">type</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> --version <span class="token punctuation">]</span> <span class="token punctuation">[</span> -V <span class="token function">file</span> <span class="token punctuation">]</span>
                <span class="token punctuation">[</span> -w <span class="token function">file</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> -W filecount <span class="token punctuation">]</span> <span class="token punctuation">[</span> -y datalinktype <span class="token punctuation">]</span> <span class="token punctuation">[</span> -z postrotate-command <span class="token punctuation">]</span>
                <span class="token punctuation">[</span> -Z user <span class="token punctuation">]</span> <span class="token punctuation">[</span> expression <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>常用的参数含义：</p>
<ul>
<li><code>-a</code> 将网络地址转变为易识别的主机名（默认）</li>
<li><code>-n</code> 不将网络地址转变为易识别的主机名，即直接显示 IP 地址，可以省略 DNS 查询</li>
<li><code>-nn</code> 不进行端口名称的转换</li>
<li><code>-t</code> 不显示时间戳</li>
<li><code>-tttt</code> 输出由 date 处理后的时间戳</li>
<li><code>-c</code> 捕获指定数量的数据包后退出</li>
<li><code>-e</code> 显示数据链路层的头部信息，即 MAC 地址信息：<code>00:8c:fa:f3:e3:04 (oui Unknown) &gt; 00:e0:ec:3e:8d:39 (oui Unknown), ethertype IPv4 (0x0800), length 71</code></li>
<li><code>-f</code> 将目标的 internet 地址以 IP 形式展示</li>
<li><code>-i</code> 监听指定的网络接口</li>
<li><code>-S</code> 将 tcp 的序号以绝对值形式输出，而不是相对值</li>
<li><code>-r</code> 从指定文档中读取数据包</li>
<li><code>-w</code> 不分析和输出，将截获的数据包写入指定文档</li>
<li><code>-T</code> 将截获的数据包按指定类型报文解析，如：<code>cnfp/rpc/rtp/snmp/vat/wb</code></li>
<li><code>-F</code> 从指定文档读取过滤规则，忽略命令行的其他参数指定的过滤规则</li>
<li><code>-v</code> 输出较详细的信息，如 IP 包的 TTL 和协议类型</li>
<li><code>-vv</code> 输出详细的信息</li>
<li><code>-l</code> 将标准输出转变为行缓冲方式</li>
<li><code>-d</code> 将上次捕获的信息包以汇编格式显示</li>
<li><code>-dd</code> 将上次捕获的信息包以 C 语言格式显示</li>
<li><code>-ddd</code> 将上次捕获的信息包以十进制格式显示</li>
</ul>
<p>除了参数之外，更重要的是过滤表达式，包含三个类型关键字：</p>
<ul>
<li><code>host: 10.10.13.15</code> 监听的主机</li>
<li><code>net: 10.10.0.0</code> 监听的网络</li>
<li><code>port: 21</code> 监听的端口</li>
</ul>
<p>四个截获方向关键字：</p>
<ul>
<li><code>dst: 10.10.13.15</code> 目标主机</li>
<li><code>src: 10.10.0.0</code> 源网络</li>
<li><code>dst and src</code></li>
<li><code>dst or src</code>（缺省值）</li>
</ul>
<p>多个协议关键字：<code>ether/fddi/tr/ip/ip6/rarp/decnet/tcp/udp</code>。</p>
<p>还支持组合表达式：<code>not/!/and/&amp;&amp;/or/||</code>。</p>
<p>举几个常用的例子：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 只捕获指定 IP 的数据包</span>
$ tcpdump <span class="token function">host</span> <span class="token number">10.10</span>.13.15
<span class="token comment"># 捕获两个 IP 的数据包</span>
$ tcpdump <span class="token function">host</span> <span class="token number">1010.13</span>.15 and <span class="token punctuation">\</span><span class="token punctuation">(</span><span class="token number">10.10</span>.13.47<span class="token punctuation">\</span><span class="token punctuation">)</span>
<span class="token comment"># 捕获指定端口和协议的数据包</span>
$ tcpdump tcp port <span class="token number">21</span> and <span class="token function">host</span> <span class="token number">10.10</span>.13.15<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2><span id="实例测试">实例测试</span></h2><blockquote>
<p>这个实例是 A 机器 <code>（client）</code> 向 B 机器 <code>（server）</code> 发起 <code>mysql</code> 实例连接，并立刻 <code>exit</code> 的场景。</p>
</blockquote>
<p>步骤：</p>
<ol>
<li>A 机器启动嗅探器：<code>tcpdump host 10.92.143.15 -tttt -S -nn</code></li>
<li>A 机器执行<code>mysql -u root -h 10.92.143.15 -p</code></li>
<li>A 机器数据库连接成功后，立刻 <code>exit;</code> 退出 <code>mysql</code> 实例连接</li>
</ol>
<p>报文：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 三次握手，其中 S 代表 Syn，. 代表 Ack，S. 代表 Syn, Ack</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.768100 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>S<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">864854527</span>, win <span class="token number">14600</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,sackOK,TS val <span class="token number">2246810963</span> ecr <span class="token number">0</span>,nop,wscale <span class="token number">8</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.810055 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">4288771247</span>, ack <span class="token number">864854528</span>, win <span class="token number">14480</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,sackOK,TS val <span class="token number">2062159250</span> ecr <span class="token number">2246810963</span>,nop,wscale <span class="token number">8</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.810065 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">4288771248</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246811005</span> ecr <span class="token number">2062159250</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token comment"># 登录校验，传输用户名和密码验证阶段，其中 P 代表 Push，传输数据需要。这里包含登录验证和版本信息等元数据的交换</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.852102 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">4288771248</span>:4288771308, ack <span class="token number">864854528</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062159292</span> ecr <span class="token number">2246811005</span><span class="token punctuation">]</span>, length <span class="token number">60</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.852118 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">4288771308</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246811047</span> ecr <span class="token number">2062159292</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.853251 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">864854528</span>:864854590, ack <span class="token number">4288771308</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246811048</span> ecr <span class="token number">2062159292</span><span class="token punctuation">]</span>, length <span class="token number">62</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.895198 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">864854590</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062159335</span> ecr <span class="token number">2246811048</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.895256 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">4288771308</span>:4288771319, ack <span class="token number">864854590</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062159335</span> ecr <span class="token number">2246811048</span><span class="token punctuation">]</span>, length <span class="token number">11</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.895264 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">4288771319</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246811090</span> ecr <span class="token number">2062159335</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.895312 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">864854590</span>:864854627, ack <span class="token number">4288771319</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246811090</span> ecr <span class="token number">2062159335</span><span class="token punctuation">]</span>, length <span class="token number">37</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.937268 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">864854627</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062159377</span> ecr <span class="token number">2246811090</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.937405 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">4288771319</span>:4288771409, ack <span class="token number">864854627</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062159377</span> ecr <span class="token number">2246811090</span><span class="token punctuation">]</span>, length <span class="token number">90</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:42.937414 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">4288771409</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246811132</span> ecr <span class="token number">2062159377</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token comment"># 发送 exit；正好 5 个字符</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:44.366633 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">864854627</span>:864854632, ack <span class="token number">4288771409</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246812561</span> ecr <span class="token number">2062159377</span><span class="token punctuation">]</span>, length <span class="token number">5</span>
<span class="token comment"># 四次挥手，其中 F 代表 FIN，完成数据发送</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:44.366649 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>F.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">864854632</span>, ack <span class="token number">4288771409</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246812561</span> ecr <span class="token number">2062159377</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token comment">## 这个是 exit 的答复</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:44.408575 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">864854632</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062160848</span> ecr <span class="token number">2246812561</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:44.408618 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">864854633</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062160848</span> ecr <span class="token number">2246812561</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:44.408652 IP <span class="token number">10.92</span>.143.15.3306 <span class="token operator">></span> <span class="token number">10.119</span>.124.24.45298: Flags <span class="token punctuation">[</span>F.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">4288771409</span>, ack <span class="token number">864854633</span>, win <span class="token number">57</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2062160848</span> ecr <span class="token number">2246812561</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
<span class="token number">2018</span>-08-19 <span class="token number">22</span>:52:44.408657 IP <span class="token number">10.119</span>.124.24.45298 <span class="token operator">></span> <span class="token number">10.92</span>.143.15.3306: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">4288771410</span>, win <span class="token number">58</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">2246812603</span> ecr <span class="token number">2062160848</span><span class="token punctuation">]</span>, length <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>具体的 <code>mysql</code> 通信内容可以查看这篇文章：<a target="_blank" rel="noopener" href="https://jin-yang.github.io/post/mysql-protocol.html">https://jin-yang.github.io/po…</a></p>
</blockquote>

            </div>
            <!-- Post Comments -->
            
        </div>
        <!-- Copyright 版权 start -->
        <div id="copyright">
    <ul>
        <li>&copy;Powered By <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
        <li>Theme: <a target="_blank" rel="noopener" href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
        <!-- <li><a href="">鄂ICP备2020015912号-1</a></li> -->
    </ul>
    
    <span id="busuanzi_container_site_pv"> 2020 </span>
    
</div>
    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>





</html>