<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="author" content="maywzh">


<meta name="subtitle" content="0x01 MAYSTORY">


<meta name="description" content="Namasday.">


<meta name="keywords" content="Tech Blogs">


<title>如何理解版本号 | 0x01 MAYSTORY </title>


    
    <link rel="icon" href="/bitbug_favicon_128s.ico">
    

    
    
    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    
    
    
    
    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    
    
    
    
    
    
    
    
    
<meta name="generator" content="Hexo 5.1.1"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">梅故事壹</a> | <a
                    href="/">0x01 MAYSTORY</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" target="_blank" rel="noopener" href="https://blog.maywzh.com">Blog</a>
                
                <a class="menu-item" target="_blank" rel="noopener" href="https://tech.maywzh.com">Tech</a>
                
                <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">梅故事壹</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" target="_blank" rel="noopener" href="https://blog.maywzh.com">Blog</a>
                
                <a class="menu-item" target="_blank" rel="noopener" href="https://tech.maywzh.com">Tech</a>
                
                <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">如何理解版本号</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">maywzh</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">July 18, 2016&nbsp;&nbsp;1:36:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/DevOps/">DevOps</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="一句话概括"><a href="#一句话概括" class="headerlink" title="一句话概括"></a>一句话概括</h2><p>语义化版本号的格式为主版本号。次版本号。修订号 (x.y.z)，递增规则如下</p>
<p>x: 主版本号，做了不兼容的 API 修改</p>
<p>y: 次版本号，做了向下兼容的功能性更新</p>
<p>z: 修订号，一般是向下兼容的 bugfix 和优化</p>
<p>（以下，皆以 x 代表主版本号，y 代表次版本号，z 代表修订号）<br><img src="https://raw.githubusercontent.com/maywzh/imagebed/master/img/1_7h56wnp4mqlOqRm4aF9cTQ.png" alt="img"></p>
<a id="more"></a>
<h2 id="为什么要版本号"><a href="#为什么要版本号" class="headerlink" title="为什么要版本号"></a>为什么要版本号</h2><h3 id="“依赖地狱”-问题"><a href="#“依赖地狱”-问题" class="headerlink" title="“依赖地狱” 问题"></a>“依赖地狱” 问题</h3><p>大型软件系统往往依赖于众多套件、库，这些依赖关系相当复杂，依赖关系过高会导致版本控制被锁死的问题。想象一下，某一个库依赖于其他库，这些库又依赖于另一些库，那么其中某个库的升级导致的不兼容问题，则会因影响整个系统。依赖关系太松散，则会导致版本的混乱。这就被称之为依赖地狱。</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>一个合理的语义化的版本号约束规则，可以明确版本中的依赖问题。例如 x1.y1.z1 软件依赖于 x11.y11.z11 这个特定版本的库，在库的整个 x11 的主版本，x1 版本的软件可以确保使用正常。这套规则针对于定义的公共 API 而制定：</p>
<ul>
<li>重大版本更新： x 递增，大量新功能的更新，可能不向下兼容</li>
<li>版本功能更新：y 递增，API 保持向下兼容的新增及修改</li>
<li>版本修订，z 递增，修复问题但不影响 API ，向下兼容</li>
</ul>
<p>在这套规则约束下，版本号及其更新方式包含了相邻版本间的底层代码和修改内容的信息。</p>
<h2 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h2><h3 id="重要程度"><a href="#重要程度" class="headerlink" title="重要程度"></a>重要程度</h3><ul>
<li><strong> 必要级: MUST, MUST NOT</strong><ul>
<li>使用语义化版本控制的软件必须定义公共 API</li>
<li>标准版本号必须采用 X.Y.Z 格式，数值递增<ul>
<li>1.8.1 -&gt; 1.9.0 -&gt; 1.10.0</li>
</ul>
</li>
<li>某版本发行后禁止修改，幂等性地，修改后必须按新版本发行</li>
<li>修订号 Z（x.y.Z | x &gt; 0）在 <strong> 只做了向下兼容的修正时 </strong> 才递增。这里的修正指的是针对不正确结果而进行的内部修改</li>
<li>次版本号 Y（x.Y.z | x &gt; 0）在 <strong> 有向下兼容的新功能出现时 </strong> 递增，任何公共 API 的功能被标记为弃用时也必须递增。每当次版本号递增时，修订号必须归零</li>
<li>主版本号 X（X.y.z | X &gt; 0）必须 <strong> 在有任何不兼容的修改被加入公共 API 时 </strong> 递增。每当主版本号递增时，次版本号和修订号必须归零。</li>
<li>判断版本优先层级时，必须把版本依序拆分为主版本号、次版本号、修订号及先行版本号后进行比较（版本编译信息不在这份比较的列表中）。由左到右依序比较每个标识符号，第一个差异值用来决定优先层级：主版本号、次版本号及修订号以数值比较，例如：1.0.0 &lt; 2.0.0 &lt; 2.1.0 &lt; 2.1.1。当主版本号、次版本号及修订号都相同时，改以优先层级比较低的先行版本号决定。例如：1.0.0-alpha &lt; 1.0.0。有相同主版本号、次版本号及修订号的两个先行版本号，其优先层级 “必须 MUST ” 透过由左到右的每个被句点分隔的标识符号来比较，直到找到一个差异值后决定：只有数字的标识符号以数值高低比较，有字母或连接号时则逐字以 ASCII 的排序来比较。数字的标识符号比非数字的标识符号优先层级低。若开头的标识符号都相同时，栏位比较多的先行版本号优先层级比较高。<ul>
<li>范例：1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0- rc.1 &lt; 1.0.0。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong> 应该级：REQUIRED, SHALL, SHALL NOT</strong></p>
<ul>
<li>主版本号为零（0.y.z）的软件处于开发初始阶段，一切都可能随时被改变。这样的公共 API 不应该被视为稳定版</li>
<li>1.0.0 的版本号用于界定公共 API 的形成。这一版本之后所有的版本号更新都基于公共 API 及其修改内容。</li>
<li>当判断版本的优先层级时，版本编译信息应该被忽略。因此当两个版本只有在版本编译信息有差别时，属于相同的优先层级。</li>
</ul>
</li>
<li><p><strong> 选项级：MAY、OPTIONAL</strong></p>
<ul>
<li>次版本号 Y（x.Y.z | x &gt; 0）在内部程序有大量新功能或改进被加入时递增，也可以包括修订级别的改变</li>
<li>主版本号可以包括次版本号及修订级别的改变。</li>
<li>先行版本号被标注在修订版之后，先加上一个连接号再加上一连串以句点分隔的标识符号来修饰。标识符号必须由 ASCII 码的英数字和连接号 [0-9A-Za-z-] 组成，且禁止留白。数字型的标识符号禁止在前方补零。先行版的优先级低于相关联的标准版本。被标上先行版本号则表示这个版本并非稳定而且可能无法达到兼容的需求。<ul>
<li>范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。</li>
</ul>
</li>
<li>版本编译信息可以被标注在修订版或先行版本号之后，先加上一个加号再加上一连串以句点分隔的标识符号来修饰。标识符号必须由 ASCII 的英数字和连接号 [0-9A-Za-z-] 组成，且禁止留白。<ul>
<li>范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="一些建议"><a href="#一些建议" class="headerlink" title="一些建议"></a>一些建议</h2><ul>
<li>0.y.z 初始开发阶段，最好以 0.1.0 作为原始开发版本</li>
<li>快速开发和迭代时期，此时主版本号应该为 0</li>
<li>软件被用于正式环境即是 1.0.0 版本的最佳时机</li>
<li>不要为了语义化版本号而语义化，它是为了开发迭代服务的</li>
<li>谨慎对待不兼容的大版本（即主版本号级别）升级</li>
<li>处理启用的更新之前，保留一个次版本，该版本应具有弃用信息</li>
</ul>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/"># 软件工程</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2016/10/10/Nginx/Nginx%E9%85%8D%E7%BD%AE%E5%88%9D%E6%AD%A5/">Nginx 配置初步</a>
            
            
            <a class="next" rel="next" href="/2016/04/16/%E7%BC%96%E7%A8%8B/%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%B9%8B%E4%BB%8E%E5%90%8C%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%88%B0%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/">从同步编程到异步编程</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span><a href="https://blog.maywzh.com" target="_blank">© maywzh</a>
            
        </span>
        
        <span> | <a href="https://beian.miit.gov.cn" target="_blank">鄂ICP备2020015912号-1</a></span>
        
        
        <span> | <img src="https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png" style="width:16px;"><a
                href="http://www.beian.gov.cn/" target="_blank">赣公网安备36040302000263号</a></span>
        
    </div>
</footer>
    </div>
</body>
</html>
